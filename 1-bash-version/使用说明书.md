# 使用说明书

## 📋 快速参考

### 常用命令

```bash
# 查看日志
tail -f /home/fan_control/fan_control.log

# 服务管理
systemctl --user start fan-control.service    # 启动
systemctl --user stop fan-control.service     # 停止
systemctl --user restart fan-control.service  # 重启
systemctl --user status fan-control.service   # 状态
```

---

## ⚙️ 配置参数详解

### 温度阈值

| 参数 | 默认值 | 说明 |
|------|--------|------|
| HIGH_TEMP_THRESHOLD | 70°C | 启动手动风扇 |
| CRITICAL_TEMP_THRESHOLD | 75°C | 启动功率限制 |
| LOW_TEMP_THRESHOLD | 65°C | 恢复自动风扇 |
| COOL_TEMP_THRESHOLD | 45°C | 恢复默认功率 |

### 持续时间（防抖动）

| 参数 | 默认值 | 说明 |
|------|--------|------|
| HIGH_TEMP_DURATION | 3秒 | 触发手动风扇 |
| CRITICAL_TEMP_DURATION | 6秒 | 触发功率限制 |
| LOW_TEMP_DURATION | 10秒 | 恢复自动风扇 |
| COOL_TEMP_DURATION | 15秒 | 恢复默认功率 |

### 风扇和功率

| 参数 | 默认值 | 说明 |
|------|--------|------|
| MANUAL_FAN_SPEED | 75% | 手动风扇转速 |
| REDUCED_POWER_PERCENT | 75% | 降低功率比例 |
| ENABLE_POWER_LIMIT | 1 | 1=启用, 0=禁用 |

### 深度休眠

| 参数 | 默认值 | 说明 |
|------|--------|------|
| ENABLE_DEEP_SLEEP | 1 | 1=启用, 0=禁用 |
| DEEP_SLEEP_THRESHOLD | 900秒 | 15分钟后进入 |
| DEEP_SLEEP_MULTIPLIER | 10倍 | 间隔延长倍数 |

### 日志控制

| 参数 | 默认值 | 说明 |
|------|--------|------|
| HEARTBEAT_VERBOSE_OUTPUT | 0 | 0=简洁, 1=详细 |
| CHECK_INTERVAL | 5秒 | 检测间隔 |
| STATS_INTERVAL | 300秒 | 统计输出间隔 |

---

## 📊 日志图标说明

| 图标 | 含义 |
|------|------|
| `.` | 正常心跳打点 |
| `❤` | 心跳详细信息（VERBOSE=1）|
| `💤` | 深度休眠相关 |
| `⏰` | 从深度休眠唤醒 |

---

## 🎯 推荐配置

### 生产环境（默认）

```bash
HEARTBEAT_VERBOSE_OUTPUT=0
ENABLE_DEEP_SLEEP=1
```

### 调试模式

```bash
HEARTBEAT_VERBOSE_OUTPUT=1
ENABLE_DEEP_SLEEP=0
```

---

**版本**: V1.0 Final
